(window.webpackJsonpchatroom=window.webpackJsonpchatroom||[]).push([[0],{10:function(e,t){e.exports={USER_CONNECTED:"USER_CONNECTED",USER_DISCONNECTED:"USER_DISCONNECTED",MESSAGE_RECIEVED:"MESSAGE_RECIEVED",MESSAGE_SENT:"MESSAGE_SENT",TYPING:"TYPING",VERIFY_USER:"VERIFY_USER",LOGOUT:"LOGOUT",NEW_CHAT:"NEW_CHAT",JOIN_CHAT:"JOIN_CHAT",JOINED_CHAT:"JOINED_CHAT",USER_JOINED:"USER_JOINED",STREAM:"STREAM"}},113:function(e,t){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),s=a.n(c),o=a(6),l=(a(81),a(14)),u=a(10),i=function(e){var t=e.from,a=e.message,n=e.time,c=e.response,s=e.user;return r.a.createElement("li",{className:"message-container"},r.a.createElement("div",{className:"message-data ".concat(c&&"align-right")},r.a.createElement("span",{className:"message-data-name"},t===s.name?"Me":t),r.a.createElement("span",{className:"message-data-time"},n)),r.a.createElement("div",{className:"message ".concat(c?"other-message float-right":"my-message")},a))},m=function(e){var t=e.from;return r.a.createElement("div",{className:"message-data"},r.a.createElement("span",{className:"message-data-name"},t.name," is typing..."))},E=function(e){var t=e.list,a=e.user,c=e.typing,s=e.chatName,o=Object(n.useRef)(null);return Object(n.useEffect)(function(){var e=o.current;e.scrollTop=e.scrollHeight}),r.a.createElement("div",{ref:o,className:"chat-history"},t.length>0&&r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement(i,Object.assign({key:t},e,{response:e.from!==a.name,user:a}))})),c.length>0&&c.map(function(t,a){return t.name===e.user.name||t.chat!==s?null:r.a.createElement(m,{key:a,from:t})}))},f=function(e){var t=e.list;return r.a.createElement("ul",{className:"list"},t.map(function(e,t){return r.a.createElement("li",{key:t,className:"member"},r.a.createElement("div",{className:"avatar"},e.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase()),r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"name"},e.name)))}))},b=function(e){var t=e.visible,a=e.setVisible;return r.a.createElement("div",{className:"modal",style:{display:t?"flex":"none"}},r.a.createElement("div",{onClick:function(){return a(!1)},className:"modal-overlay"}),r.a.createElement("div",{className:"modal-notice"},e.children))},d=function(e){var t=e.user,a=e.roomName,c=e.sendMessage,s=e.sendTyping,l=Object(n.useState)(""),u=Object(o.a)(l,2),i=u[0],m=u[1],E=Object(n.useState)(!1),f=Object(o.a)(E,2),b=f[0],d=f[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({chatName:a,message:i,from:t.name}),s({chatName:a,userName:t.name,isTyping:!1}),m(""),d(!1)},className:"chat-message clearfix"},r.a.createElement("input",{autoFocus:!0,autoComplete:"off",value:i,onChange:function(e){b?b&&""===e.target.value&&(d(!1),s({chatName:a,userName:t.name,isTyping:!1})):(d(!0),s({chatName:a,userName:t.name,isTyping:!0})),m(e.target.value)},name:"message-to-send",id:"message-to-send",placeholder:"Type your message here...",rows:"3"}),r.a.createElement("button",{disabled:""===i,type:"submit"},"Send"))},p=function(e){var t=e.id,a=e.close,c=Object(n.useRef)(null),s=t||"https://serene-tor-99089.herokuapp.com/";return Object(n.useEffect)(function(){c.current.focus(),c.current.setSelectionRange(0,s.length)}),r.a.createElement("div",{className:"invite-modal"},r.a.createElement("h4",null,"Copy and send this ",t?"invite code":"link"," to your friends to this room"),r.a.createElement("input",{ref:c,value:s,autoFocus:!0,readOnly:!0}),r.a.createElement("button",{className:"action-button",onClick:function(e){navigator.clipboard.writeText(s),a()},type:"button"},"Copy"))},h=a(64),N=a.n(h),g=a(31),v=a.n(g),O=function(e){var t=e.room,a=e.user,c=e.sendMessage,s=e.sendTyping,l=e.typing,u=Object(n.useState)(!0),i=Object(o.a)(u,2),m=i[0],h=i[1],g=Object(n.useState)(!1),O=Object(o.a)(g,2),S=O[0],y=O[1];return r.a.createElement("div",{className:"chat-container"},r.a.createElement(b,{visible:m,setVisible:function(e){return h(e)}},r.a.createElement(p,{id:t.id,close:function(){return h(!1)}})),r.a.createElement("label",{htmlFor:"users-switch",className:"users-button"},S?r.a.createElement(v.a,{fontSize:"large"}):r.a.createElement(N.a,{fontSize:"large"})),r.a.createElement("input",{value:S,onChange:function(e){return y(e.currentTarget.checked)},className:"users-switch",type:"checkbox",id:"users-switch"}),r.a.createElement("div",{className:"people-list",id:"people-list"},r.a.createElement("button",{type:"button",onClick:function(){return h(!0)}},"Invite Friends"),r.a.createElement(f,{list:Object.values(t.users)})),r.a.createElement("div",{className:"chat"},r.a.createElement(E,{list:t.messages,user:a,typing:l,chatName:t.name}),r.a.createElement(d,{user:a,roomName:t.name,sendMessage:c,sendTyping:s})))},S=a(140),y=function(e){var t=e.value,a=e.index;return r.a.createElement(S.a,{className:e.className,role:"tabpanel",hidden:t!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"scrollable-auto-tab-".concat(a)},e.children)},C=a(137),j=a(141),T=a(138),R=a(136),_=a(65),I=a.n(_),k=Object(R.a)(function(){return{tabs:{borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxShadow:"none"},icon:{cursor:"pointer",color:"#86BB71",alignSelf:"center",transition:"all ease-out 0.5s","&:hover":{color:"red"}}}}),D=function(e){var t=e.currentRoom,a=e.setCurrentRoom,n=e.chats,c=e.openModal,s=k();return r.a.createElement(C.a,{className:s.tabs,position:"static",color:"default"},r.a.createElement(j.a,{value:t,onChange:function(e,t){return a(t)},variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},n.map(function(e,t){return r.a.createElement(T.a,{key:t,label:e.name,id:"scrollable-auto-tab-".concat(t),"aria-controls":"scrollable-auto-tabpanel-".concat(t)})}),r.a.createElement(I.a,{className:s.icon,onClick:c})))},w=a(142),U=a(139),x=Object(R.a)(function(e){return{close:{padding:e.spacing(.5)}}}),A=function(e){var t=x(),a=e.open,n=e.setOpen,c=e.user+e.notice,s=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",null,r.a.createElement(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:a,autoHideDuration:4e3,onClose:s,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},c),action:[r.a.createElement(U.a,{key:"close","aria-label":"close",color:"inherit",className:t.close,onClick:s},r.a.createElement(v.a,null))]}))},G=a(66),M=a.n(G),H=function(e){var t=e.createNewChat,a=e.joinChat,c=e.error,s=Object(n.useState)(!0),l=Object(o.a)(s,2),u=l[0],i=l[1],m=Object(n.useState)(""),E=Object(o.a)(m,2),f=E[0],b=E[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),h=p[0],N=p[1];return r.a.createElement("div",{className:"new-chat-modal"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(h),N("")},className:"new-chat-form",style:{display:u?"flex":"none"}},r.a.createElement("label",null,"Do you have an invite code?",r.a.createElement("br",null),"Paste it in here to join the room"),r.a.createElement("input",{autoFocus:!0,value:h,onChange:function(e){return N(e.target.value)},type:"text",placeholder:"e.g. 1111-a22222-c333333"}),r.a.createElement("output",null,""===h?"":c),r.a.createElement("button",{disabled:""===h,type:"submit",className:"action-button"},"Join"),"or",r.a.createElement("button",{className:"switch-button",type:"button",onClick:function(){return i(!1)}},"Create New Room")),r.a.createElement("form",{style:{display:u?"none":"flex"},className:"new-chat-form",onSubmit:function(e){e.preventDefault(),t(f),b("")}},r.a.createElement("label",null,"Enter the new chat name:"),r.a.createElement("input",{value:f,onChange:function(e){return b(e.target.value)},type:"text",placeholder:"chat name"}),r.a.createElement("output",null,f.length>10?"Too long for a chat name. Try something shorter than 10 symbols.":""),r.a.createElement("button",{disabled:""===f,type:"submit",className:"action-button"},"Create"),"or",r.a.createElement("button",{className:"switch-button",type:"button",onClick:function(){return i(!0)}},r.a.createElement("span",null,r.a.createElement(M.a,{fontSize:"large"})),"Go back to join existing room")))},J=function(e){var t=e.user,a=e.socket,c=Object(n.useState)(0),s=Object(o.a)(c,2),i=s[0],m=s[1],E=Object(n.useState)([{name:"General",users:{},messages:[]}]),f=Object(o.a)(E,2),d=f[0],p=f[1],h=Object(n.useState)([]),N=Object(o.a)(h,2),g=N[0],v=N[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),j=C[0],T=C[1],R=Object(n.useState)(!1),_=Object(o.a)(R,2),I=_[0],k=_[1],w=Object(n.useState)(!1),U=Object(o.a)(w,2),x=U[0],G=U[1],M=Object(n.useState)(""),J=Object(o.a)(M,2),F=J[0],V=J[1],Y=Object(n.useState)(""),P=Object(o.a)(Y,2),B=P[0],L=P[1];Object(n.useEffect)(function(){a.removeAllListeners(),a.on(u.USER_CONNECTED,function(e){var t=e.connectedUsers,a=e.user;k(!0),V(a.name),q(t)}),a.on(u.USER_DISCONNECTED,function(e){var t=e.connectedUsers,a=e.user;G(!0),V(a),q(t)}),a.on(u.NEW_CHAT,function(e){return z(e,!1)}),a.on(u.JOINED_CHAT,function(e){return $(e)}),a.on(u.MESSAGE_RECIEVED,function(e){return Q(e)}),a.on(u.USER_JOINED,function(e,t){return K(e,t)})},[d]),Object(n.useEffect)(function(){a.on(u.TYPING,function(e){var t=e.chatName,a=e.userName,n=e.isTyping;return W({name:a,chat:t},n)})});var z=function(e){var t=[].concat(Object(l.a)(d),[e]);p(t)},W=function(e,t){var a=g.slice();t?g.find(function(t){return t.name===e.name&&t.chat===e.chat})||(a.push(e),v(a)):(a=a.filter(function(t){return t.name!==e.name&&t.chat!==e.chat}),v(a))},q=function(e){var t=d.findIndex(function(e){return"General"===e.name}),a=d.slice();a[t].users=e,p(a)},K=function(e,t){var a=d.slice(),n=a.findIndex(function(t){return t.name===e.name});-1!==n&&(a[n].users=e.users,p(a))},Q=function(e){var t=d.map(function(t){return e.chatName===t.name?(t.messages.push(e),t):t});p(t)},X=function(e){var t=e.chatName,n=e.message,r=e.from;return a.emit(u.MESSAGE_SENT,{chatName:t,message:n,from:r})},Z=function(e){var t=e.chatName,n=e.userName,r=e.isTyping;return a.emit(u.TYPING,{chatName:t,userName:n,isTyping:r})},$=function(e){e?(z(e,!1),T(!1),m(i+1)):L("Sorry, this chat does not exist :(")};return r.a.createElement("div",{className:"wrapper"},r.a.createElement(A,{user:F,notice:" has connected",open:I,setOpen:k}),r.a.createElement(A,{user:F,notice:" has disconnected",open:x,setOpen:G}),r.a.createElement(b,{visible:j,setVisible:T},r.a.createElement(H,{createNewChat:function(e){T(!1),m(i+1),a.emit(u.NEW_CHAT,{chatName:e,createdBy:t})},joinChat:function(e){a.emit(u.JOIN_CHAT,{chatId:e,user:t})},error:B})),r.a.createElement(D,{currentRoom:i,setCurrentRoom:m,chats:d,openModal:function(){return T(!0)}}),d.map(function(e,a){return r.a.createElement(y,{key:a,value:i,index:a},r.a.createElement(O,{room:e,user:t,sendMessage:X,sendTyping:Z,typing:g}))}))},F=function(e){var t=e.userName,a=e.setUserName,n=e.onSubmit,c=e.error;return r.a.createElement("form",{onSubmit:n,className:"sign-in-form container"},r.a.createElement("label",null,"Enter your name to start"),r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Name",value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement("output",null,t.length>15?"It's too long:( Try something shorter than 15 symbols":c),r.a.createElement("button",{disabled:""===t,type:"submit"},"Start Chatting"))},V=function(e){var t=e.setUser,a=e.socket,c=Object(n.useState)(""),s=Object(o.a)(c,2),l=s[0],i=s[1],m=Object(n.useState)(""),E=Object(o.a)(m,2),f=E[0],b=E[1],d=function(e){var a=e.user;e.isTaken?b("Sorry, this name is taken :("):(b(""),t(a))};return r.a.createElement("section",null,r.a.createElement(F,{userName:l,setUserName:i,onSubmit:function(e){e.preventDefault(),l.length>15||a.emit(u.VERIFY_USER,l,d)},error:f}))},Y=a(67),P=a.n(Y)()("/");P.on("connect",function(){return console.log("connected!")});var B=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],s=function(){P.emit(u.LOGOUT,a),c(null)};return Object(n.useEffect)(function(){return function(){s()}},[]),a?r.a.createElement(J,{user:a,socket:P,logout:s}):r.a.createElement(V,{setUser:function(e){P.emit(u.USER_CONNECTED,e),c(e)},socket:P})};s.a.render(r.a.createElement(B,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a(116)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.b270c8cc.chunk.js.map