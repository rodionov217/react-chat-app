(window.webpackJsonpchatroom=window.webpackJsonpchatroom||[]).push([[0],{10:function(e,t){e.exports={USER_CONNECTED:"USER_CONNECTED",USER_DISCONNECTED:"USER_DISCONNECTED",MESSAGE_RECIEVED:"MESSAGE_RECIEVED",MESSAGE_SENT:"MESSAGE_SENT",TYPING:"TYPING",VERIFY_USER:"VERIFY_USER",LOGOUT:"LOGOUT",NEW_CHAT:"NEW_CHAT",JOIN_CHAT:"JOIN_CHAT",JOINED_CHAT:"JOINED_CHAT",USER_JOINED:"USER_JOINED",STREAM:"STREAM"}},113:function(e,t){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),s=a(4),l=(a(81),a(14)),u=a(10),i=function(e){var t=e.from,a=e.message,n=e.time,c=e.response,o=e.user;return r.a.createElement("li",{className:"message-container"},r.a.createElement("div",{className:"message-data ".concat(c&&"align-right")},r.a.createElement("span",{className:"message-data-name"},t===o.name?"Me":t),r.a.createElement("span",{className:"message-data-time"},n)),r.a.createElement("div",{className:"message ".concat(c?"other-message float-right":"my-message")},a))},m=function(e){var t=e.from;return r.a.createElement("div",{className:"message-data"},r.a.createElement("span",{className:"message-data-name"},t.name," is typing..."))},E=function(e){var t=e.list,a=e.user,c=e.typing,o=e.chatName,s=Object(n.useRef)(null);return Object(n.useEffect)(function(){var e=s.current;e.scrollTop=e.scrollHeight}),r.a.createElement("div",{ref:s,className:"chat-history"},t.length>0&&r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement(i,Object.assign({key:t},e,{response:e.from!==a.name,user:a}))})),c.length>0&&c.map(function(t,a){return t.name===e.user.name||t.chat!==o?null:r.a.createElement(m,{key:a,from:t})}))},b=function(e){var t=e.list,a=e.visible;return r.a.createElement("ul",{style:{display:a?"block":"none"},className:"list"},t.map(function(e,t){return r.a.createElement("li",{key:t,className:"member"},r.a.createElement("div",{className:"avatar"},e.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase()),r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"name"},e.name)))}))},f=function(e){var t=e.visible,a=e.setVisible;return r.a.createElement("div",{className:"modal",style:{display:t?"flex":"none"}},r.a.createElement("div",{onClick:function(){return a(!1)},className:"modal-overlay"}),r.a.createElement("div",{className:"modal-notice"},e.children))},p=function(e){var t=e.user,a=e.roomName,c=e.sendMessage,o=e.sendTyping,l=Object(n.useState)(""),u=Object(s.a)(l,2),i=u[0],m=u[1],E=Object(n.useState)(!1),b=Object(s.a)(E,2),f=b[0],p=b[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({chatName:a,message:i,from:t.name}),o({chatName:a,userName:t.name,isTyping:!1}),m(""),p(!1)},className:"chat-message clearfix"},r.a.createElement("input",{autoFocus:!0,autoComplete:"off",value:i,onChange:function(e){f?f&&""===e.target.value&&(p(!1),o({chatName:a,userName:t.name,isTyping:!1})):(p(!0),o({chatName:a,userName:t.name,isTyping:!0})),m(e.target.value)},name:"message-to-send",id:"message-to-send",placeholder:"Type your message here...",rows:"3"}),r.a.createElement("button",{disabled:""===i,type:"submit"},"Send"))},d=function(e){var t=e.id,a=e.close,c=Object(n.useRef)(null),o=t||"https://serene-tor-99089.herokuapp.com/";return Object(n.useEffect)(function(){c.current.focus(),c.current.setSelectionRange(0,o.length)}),r.a.createElement("div",{className:"invite-modal"},r.a.createElement("h4",null,"Copy and send this ",t?"invite code":"link"," to your friends to this room"),r.a.createElement("input",{ref:c,value:o,autoFocus:!0,readOnly:!0}),r.a.createElement("button",{className:"action-button",onClick:function(e){navigator.clipboard.writeText(o),a()},type:"button"},"Copy"))},N=a(64),h=a.n(N),g=a(31),v=a.n(g),O=function(e){var t=e.room,a=e.user,c=e.sendMessage,o=e.sendTyping,l=e.typing,u=Object(n.useState)(!0),i=Object(s.a)(u,2),m=i[0],N=i[1],g=Object(n.useState)(!0),O=Object(s.a)(g,2),S=O[0],y=O[1];return r.a.createElement("div",{className:"chat-container"},r.a.createElement(f,{visible:m,setVisible:function(e){return N(e)}},r.a.createElement(d,{id:t.id,close:function(){return N(!1)}})),r.a.createElement("label",{htmlFor:"users-switch",className:"users-button"},S?r.a.createElement(v.a,{fontSize:"large"}):r.a.createElement(h.a,{fontSize:"large"})),r.a.createElement("input",{defaultChecked:!0,onChange:function(e){return y(e.currentTarget.checked)},className:"users-switch",type:"checkbox",id:"users-switch"}),r.a.createElement("div",{className:"people-list",id:"people-list"},r.a.createElement("button",{type:"button",onClick:function(){return N(!0)}},"Invite Friends"),r.a.createElement(b,{visible:S,list:Object.values(t.users)})),r.a.createElement("div",{className:"chat"},r.a.createElement(E,{list:t.messages,user:a,typing:l,chatName:t.name}),r.a.createElement(p,{user:a,roomName:t.name,sendMessage:c,sendTyping:o})))},S=a(139),y=a(141),C=function(e){var t=e.value,a=e.index;e.className;return r.a.createElement(y.a,{className:e.className,role:"tabpanel",hidden:t!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"scrollable-auto-tab-".concat(a)},e.children)},j=a(137),T=a(142),x=a(138),R=a(65),k=a.n(R),_=function(e){var t=e.currentRoom,a=e.setCurrentRoom,n=e.chats,c=e.openModal,o=e.icon,s=e.className;return r.a.createElement(j.a,{className:s,position:"static",color:"default"},r.a.createElement(T.a,{value:t,onChange:function(e,t){return a(t)},variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},n.map(function(e,t){return r.a.createElement(x.a,{key:t,label:e.name,id:"scrollable-auto-tab-".concat(t),"aria-controls":"scrollable-auto-tabpanel-".concat(t)})}),r.a.createElement(k.a,{className:o,onClick:c})))},I=a(143),D=a(140),w=Object(S.a)(function(e){return{close:{padding:e.spacing(.5)}}}),U=function(e){var t=w(),a=e.open,n=e.setOpen,c=e.user+e.notice,o=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement("div",null,r.a.createElement(I.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:a,autoHideDuration:4e3,onClose:o,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},c),action:[r.a.createElement(D.a,{key:"close","aria-label":"close",color:"inherit",className:t.close,onClick:o},r.a.createElement(v.a,null))]}))},A=a(66),G=a.n(A),M=function(e){var t=e.createNewChat,a=e.joinChat,c=e.error,o=Object(n.useState)(!0),l=Object(s.a)(o,2),u=l[0],i=l[1],m=Object(n.useState)(""),E=Object(s.a)(m,2),b=E[0],f=E[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),N=d[0],h=d[1];return r.a.createElement("div",{className:"new-chat-modal"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(N),h("")},className:"new-chat-form",style:{display:u?"flex":"none"}},r.a.createElement("label",null,"Do you have an invite code?",r.a.createElement("br",null),"Paste it in here to join the room"),r.a.createElement("input",{autoFocus:!0,value:N,onChange:function(e){return h(e.target.value)},type:"text",placeholder:"e.g. 1111-a22222-c333333"}),r.a.createElement("output",null,""===N?"":c),r.a.createElement("button",{disabled:""===N,type:"submit",className:"action-button"},"Join"),"or",r.a.createElement("button",{className:"switch-button",type:"button",onClick:function(){return i(!1)}},"Create New Room")),r.a.createElement("form",{style:{display:u?"none":"flex"},className:"new-chat-form",onSubmit:function(e){e.preventDefault(),t(b),f("")}},r.a.createElement("label",null,"Enter the new chat name:"),r.a.createElement("input",{value:b,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"chat name"}),r.a.createElement("output",null,b.length>10?"Too long for a chat name. Try something shorter than 10 symbols.":""),r.a.createElement("button",{disabled:""===b,type:"submit",className:"action-button"},"Create"),"or",r.a.createElement("button",{className:"switch-button",type:"button",onClick:function(){return i(!0)}},r.a.createElement("span",null,r.a.createElement(G.a,{fontSize:"large"})),"Go back to join existing room")))},H=Object(S.a)(function(e){return{root:{width:"750px",margin:"0 auto",background:"#444753",position:"relative",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)",borderRadius:"5px"},tabs:{borderTopLeftRadius:"5px",borderTopRightRadius:"5px",boxShadow:"none"},tabPanel:{backgroundColor:"transparent"},icon:{cursor:"pointer",color:"#86BB71",alignSelf:"center",transition:"all ease-out 0.5s","&:hover":{color:"red"}}}}),J=function(e){var t=H(),a=e.user,c=e.socket,o=Object(n.useState)(0),i=Object(s.a)(o,2),m=i[0],E=i[1],b=Object(n.useState)([{name:"General",users:{},messages:[]}]),p=Object(s.a)(b,2),d=p[0],N=p[1],h=Object(n.useState)([]),g=Object(s.a)(h,2),v=g[0],S=g[1],y=Object(n.useState)(!1),j=Object(s.a)(y,2),T=j[0],x=j[1],R=Object(n.useState)(!1),k=Object(s.a)(R,2),I=k[0],D=k[1],w=Object(n.useState)(!1),A=Object(s.a)(w,2),G=A[0],J=A[1],P=Object(n.useState)(""),F=Object(s.a)(P,2),V=F[0],Y=F[1],B=Object(n.useState)(""),L=Object(s.a)(B,2),z=L[0],W=L[1];Object(n.useEffect)(function(){c.removeAllListeners(),c.on(u.USER_CONNECTED,function(e){var t=e.connectedUsers,a=e.user;D(!0),Y(a.name),Q(t)}),c.on(u.USER_DISCONNECTED,function(e){var t=e.connectedUsers,a=e.user;J(!0),Y(a),Q(t)}),c.on(u.NEW_CHAT,function(e){return q(e,!1)}),c.on(u.JOINED_CHAT,function(e){return te(e)}),c.on(u.MESSAGE_RECIEVED,function(e){return Z(e)}),c.on(u.USER_JOINED,function(e,t){return X(e,t)})},[d]),Object(n.useEffect)(function(){c.on(u.TYPING,function(e){var t=e.chatName,a=e.userName,n=e.isTyping;return K({name:a,chat:t},n)})});var q=function(e){var t=[].concat(Object(l.a)(d),[e]);N(t)},K=function(e,t){var a=v.slice();t?v.find(function(t){return t.name===e.name&&t.chat===e.chat})||(a.push(e),S(a)):(a=a.filter(function(t){return t.name!==e.name&&t.chat!==e.chat}),S(a))},Q=function(e){var t=d.findIndex(function(e){return"General"===e.name}),a=d.slice();a[t].users=e,N(a)},X=function(e,t){var a=d.slice(),n=a.findIndex(function(t){return t.name===e.name});-1!==n&&(a[n].users=e.users,N(a))},Z=function(e){var t=d.map(function(t){return e.chatName===t.name?(t.messages.push(e),t):t});N(t)},$=function(e){var t=e.chatName,a=e.message,n=e.from;return c.emit(u.MESSAGE_SENT,{chatName:t,message:a,from:n})},ee=function(e){var t=e.chatName,a=e.userName,n=e.isTyping;return c.emit(u.TYPING,{chatName:t,userName:a,isTyping:n})},te=function(e){e?(q(e,!1),x(!1),E(m+1)):W("Sorry, this chat does not exist :(")};return r.a.createElement("div",{className:t.root},r.a.createElement(U,{user:V,notice:" has connected",open:I,setOpen:D}),r.a.createElement(U,{user:V,notice:" has disconnected",open:G,setOpen:J}),r.a.createElement(f,{visible:T,setVisible:x},r.a.createElement(M,{createNewChat:function(e){x(!1),E(m+1),c.emit(u.NEW_CHAT,{chatName:e,createdBy:a})},joinChat:function(e){c.emit(u.JOIN_CHAT,{chatId:e,user:a})},error:z})),r.a.createElement(_,{className:t.tabs,currentRoom:m,setCurrentRoom:E,chats:d,icon:t.icon,openModal:function(){return x(!0)}}),d.map(function(e,n){return r.a.createElement(C,{key:n,className:t.tabPanel,value:m,index:n},r.a.createElement(O,{room:e,user:a,sendMessage:$,sendTyping:ee,typing:v}))}))},P=function(e){var t=e.userName,a=e.setUserName,n=e.onSubmit,c=e.error;return r.a.createElement("form",{onSubmit:n,className:"sign-in-form container"},r.a.createElement("label",null,"Enter your name to start"),r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"Name",value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement("output",null,t.length>15?"It's too long:( Try something shorter than 15 symbols":c),r.a.createElement("button",{disabled:""===t,type:"submit"},"Start Chatting"))},F=function(e){var t=e.setUser,a=e.socket,c=Object(n.useState)(""),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(""),E=Object(s.a)(m,2),b=E[0],f=E[1],p=function(e){var a=e.user;e.isTaken?f("Sorry, this name is taken :("):(f(""),t(a))};return r.a.createElement("section",null,r.a.createElement(P,{userName:l,setUserName:i,onSubmit:function(e){e.preventDefault(),l.length>15||a.emit(u.VERIFY_USER,l,p)},error:b}))},V=a(67),Y=a.n(V),B=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),i=Object(s.a)(l,2),m=i[0],E=i[1],b=function(){c.emit(u.LOGOUT,m),E(null)};return Object(n.useEffect)(function(){return console.log("initSocket"),function(){var e=Y()("/");e.on("connect",function(){return console.log("connected!")}),o(e)}(),function(){b()}},[]),Object(n.useEffect)(function(){return console.log("APP RENDER")}),m?r.a.createElement(J,{user:m,socket:c,logout:b}):r.a.createElement(F,{setUser:function(e){c.emit(u.USER_CONNECTED,e),E(e)},socket:c})};o.a.render(r.a.createElement(B,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a(116)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.3c232f96.chunk.js.map